<head>
<!-- Generated by perlmod2www.pl -->
<title>
Exception documentation.
</title>
<link rel="stylesheet" type="text/css" href="../perl.css">
</head>
<body bgcolor="white">
<span id="modRootPath">APPRIS::Utils</span>
<span id="modName">Exception</span>
<div id="sep"></div>
<a name="TOP" id="TOP"></a>
<table id="daArea" width="100%"><tr><td id="daEntry" ><a href="#SUMMARY">Summary</a></td><td id="daEntry" ><a href="#libs">Included libraries</a></td><td id="daEntry" ><a href="#vardefs">Package variables</a></td><td id="daEntry" ><a href="#SYNOPSIS">Synopsis</a></td><td id="daEntry" ><a href="#DESCRIPTION">Description</a></td><td id="daEntry" ><a href="#General">General documentation</a></td><td id="daEntry" ><a href="#Methods">Methods</a></td></tr></table>
<div id="sep"></div>
<div id="descTitle">Summary</div>
<div id="descArea"><B>APPRIS::Utils::Exception</B> - Utility functions for error handling</div>
<div id="sep"></div>
<a name="vardefs" id="vardefs"></a><div id="descTitle">Package variables</div>
<div id="descArea"><div id="libEntry"><div id="descSubTitle">Privates (from <b>"my"</b> definitions)</div>
</div>
<div id="libEntry"><span id="var">$DEFAULT_EXCEPTION</span> = 1000</div>
<div id="libEntry"><span id="var">$VERBOSITY</span> = 3000</div>
<div id="libEntry"><span id="var">%DEPRECATED</span>;</div>
<div id="libEntry"><span id="var">$DEFAULT_DEPRECATE</span> = 3000</div>
<div id="libEntry"><span id="var">$DEFAULT_INFO</span> = 4000</div>
<div id="libEntry"><span id="var">$DEFAULT_WARNING</span> = 2000</div>
</div>
<div id="sep"></div>
<div id="descTitle">Included modules</div>
<div id="descArea"><div id="libEntry"><span id="use"><a href="../Exporter.html">Exporter</a></span></div>
</div>
<div id="sep"></div>
<a name="libs" id="libs"></a>
<div id="descTitle">Inherit</div>
<div id="descArea"><span id="isa"><a href="../Exporter.html">Exporter</a></span> </div>
<div id="sep"></div>
<a name="SYNOPSIS" id="SYNOPSIS"></a>
<div id="descTitle">Synopsis</div>
<div id="descArea"><pre id="podParagraph">  use APPRIS::Utils::Exception
    qw(throw warning deprecate verbose try catch);

  or to get all methods just

  use APPRIS::Utils::Exception;

  eval { throw("this is an exception with a stack trace") };
  if ($@) {
    print "Caught exception:\n$@";
  }

  # Or you can us the try/catch confortable syntax instead to deal with
  # throw or die.  Don't forget the ";" after the catch block.  With
  # this syntax, the original $@ is in $_ in the catch subroutine.

  try {
    throw("this is an exception with a stack trace");
  }
  catch { print "Caught exception:\n$_" };

  # silence warnings
  verbose('OFF');

  warning('this is a silent warning');

  #show deprecated and warning messages but not info
  verbose('DEPRECATE');

  warning('this is a warning');

  # show all messages
  verbose('ALL');

  info('this is an informational message');

  sub my_sub { deprecate('use other_sub() instead') }

  verbose('EXCEPTION');
  info( 'This is a high priority info message.', 1000 );</pre>
</div>
<div id="sep"></div>
<a name="DESCRIPTION" id="DESCRIPTION"></a>
<div id="descTitle">Description</div>
<div id="descArea">This is derived from the Bio::Root module in BioPerl.  Some formatting<br />has been changed and the deprecate function has been added. This is<br />especially useful for throwing exceptions with stack traces outside of a<br />blessed context.<br />The originaly implementations of these methods were by Steve Chervitz<br />and refactored by Ewan Birney.<br />The functions exported by this package provide a set of useful error<br />handling methods.
</div>
<div id="sep"></div>
<a name="Methods" id="Methods"></a>
<div id="descTitle">Methods</div>
<table id="methIndArea" width="100%" cellspacing="0"><tr><td id="methIndEntry">catch</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE1">Code</a></td></tr>
<tr><td id="methIndEntry">deprecate</td><td id="methIndEntry"><a href="#POD1">Description</a></td><td id="methIndEntry"><a href="#CODE2">Code</a></td></tr>
<tr><td id="methIndEntry">info</td><td id="methIndEntry"><a href="#POD2">Description</a></td><td id="methIndEntry"><a href="#CODE3">Code</a></td></tr>
<tr><td id="methIndEntry">stack_trace</td><td id="methIndEntry"><a href="#POD3">Description</a></td><td id="methIndEntry"><a href="#CODE4">Code</a></td></tr>
<tr><td id="methIndEntry">stack_trace_dump</td><td id="methIndEntry"><a href="#POD4">Description</a></td><td id="methIndEntry"><a href="#CODE5">Code</a></td></tr>
<tr><td id="methIndEntry">throw</td><td id="methIndEntry"><a href="#POD5">Description</a></td><td id="methIndEntry"><a href="#CODE6">Code</a></td></tr>
<tr><td id="methIndEntry">try</td><td id="methIndEntry"><a href="#POD6">Description</a></td><td id="methIndEntry"><a href="#CODE7">Code</a></td></tr>
<tr><td id="methIndEntry">verbose</td><td id="methIndEntry"><a href="#POD7">Description</a></td><td id="methIndEntry"><a href="#CODE8">Code</a></td></tr>
<tr><td id="methIndEntry">warning</td><td id="methIndEntry"><a href="#POD8">Description</a></td><td id="methIndEntry"><a href="#CODE9">Code</a></td></tr>
</table>
<div id="sep"></div>
<a name="MethDesc" id="MethDesc"></a>
<div id="mainTitle">Methods description</div>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_deprecate" id="_pod_deprecate"></a><a name="POD1" id="POD1"></a>deprecate</td><td ><a href="#CODE2">code</a></td><td >&nbsp;&nbsp;&nbsp;&nbsp;</td><td ><a href="#POD2">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph">  Arg [1]    : string $mesg
               A message describing why a method is deprecated
  Example    : use <B>APPRIS::Utils::Exception</B> qw(deprecate)
               sub old_sub {
                 deprecate('Please use new_sub() instead');
               }
  Description: Prints a warning to STDERR that the method which called 
               deprecate() is deprecated.  Also prints the line number and 
               file from which the deprecated method was called.  Deprecated
               warnings only appear once for each location the method was 
               called from.  No message is displayed if the level of verbosity
               is lower than the level of the warning.
  Returntype : none
  Exceptions : warning every time
  Caller     : deprecated methods</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_info" id="_pod_info"></a><a name="POD2" id="POD2"></a>info</td><td ><a href="#CODE3">code</a></td><td ><a href="#POD1">prev</a></td><td ><a href="#POD3">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph">  Arg [1]    : string $string
               The message to be displayed
  Arg [2]    : (optional) int $level
               Override the default level of this message so it is displayed at
               a different level of verbosity than it normally would be.
  Example    : use <B>APPRIS::Utils::Exception</B> qw(verbose info)
  Description: This prints an info message to STDERR if verbosity is higher 
               than the level of the message.  By default info messages are not
               displayed.
  Returntype : none
  Exceptions : none
  Caller     : general</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_stack_trace" id="_pod_stack_trace"></a><a name="POD3" id="POD3"></a>stack_trace</td><td ><a href="#CODE4">code</a></td><td ><a href="#POD2">prev</a></td><td ><a href="#POD4">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph">  Arg [1]    : none
  Example    : use <B>APPRIS::Utils::Exception</B> qw(stack_trace)
  Description: Gives an array to a reference of arrays with stack trace info
               each coming from the caller(stack_number) call
  Returntype : array of listrefs of strings
  Exceptions : none
  Caller     : general, stack_trace_dump()</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_stack_trace_dump" id="_pod_stack_trace_dump"></a><a name="POD4" id="POD4"></a>stack_trace_dump</td><td ><a href="#CODE5">code</a></td><td ><a href="#POD3">prev</a></td><td ><a href="#POD5">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph">  Arg [1]    : (optional) int $levels
               The number of levels to ignore from the top of the stack when
               creating the dump. This is useful when this is called internally
               from a warning or throw function when the immediate caller and 
               stack_trace_dump function calls are themselves uninteresting.
  Example    : use <B>APPRIS::Utils::Exception</B> qw(stack_trace_dump);
               print STDERR stack_trace_dump();
  Description: Returns a stack trace formatted as a string
  Returntype : string
  Exceptions : none
  Caller     : general, throw, warning</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_throw" id="_pod_throw"></a><a name="POD5" id="POD5"></a>throw</td><td ><a href="#CODE6">code</a></td><td ><a href="#POD4">prev</a></td><td ><a href="#POD6">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph">  Arg [1]    : string $msg
  Arg [2]    : (optional) int $level
               override the default level of exception throwing
  Example    : use <B>APPRIS::Utils::Exception</B> qw(throw);
               throw('We have a problem');
  Description: Throws an exception which if not caught by an eval will
               provide a stack trace to STDERR and die.  If the verbosity level
               is lower than the level of the throw, then no error message is
               displayed but the program will still die (unless the exception
               is caught).
  Returntype : none
  Exceptions : thrown every time
  Caller     : generally on error</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_try/catch" id="_pod_try/catch"></a><a name="POD6" id="POD6"></a>try/catch</td><td ><a href="#CODE7">code</a></td><td ><a href="#POD5">prev</a></td><td ><a href="#POD7">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph">  Arg [1]    : anonymous subroutine
               the block to be tried
  Arg [2]    : return value of the catch function
  Example    : use <B>APPRIS::Utils::Exception</B> qw(throw try catch)
               The syntax is:
               try { block1 } catch { block2 };
               { block1 } is the 1st argument
               catch { block2 } is the 2nd argument
               e.g.
               try {
                 throw("this is an exception with a stack trace");
               } catch {
                 print "Caught exception:\n$_";
               };
               In block2, $_ is assigned the value of the first
               throw or die statement executed in block 1.

  Description: Replaces the classical syntax
               eval { block1 };
               if ($@) { block2 }
               by a more confortable one.
               In the try/catch syntax, the original $@ is in $_ in the catch subroutine.
               This try/catch implementation is a copy and paste from
               "Programming Perl" 3rd Edition, July 2000, by L.Wall, T. Christiansen
               & J. Orwant. p227, and is only possible because of subroutine prototypes.
  Returntype : depend on what is implemented the try or catch block
  Exceptions : none
  Caller     : general</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_verbose" id="_pod_verbose"></a><a name="POD7" id="POD7"></a>verbose</td><td ><a href="#CODE8">code</a></td><td ><a href="#POD6">prev</a></td><td ><a href="#POD8">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph">  Arg [1]    : (optional) int 
  Example    : use <B>APPRIS::Utils::Exception</B> qw(verbose warning);
               #turn warnings and everything more important on (e.g. exception)
               verbose('WARNING'); 
               warning("Warning displayed");
               info("This won't be displayed");
               deprecate("This won't be diplayed"); 

               #turn exception messages on
               verbose('EXCEPTION'); 
               warning("This won't do anything");
               throw("Die with a message");

               #turn everying off
               verbose('OFF'); #same as verbose(0);               
               warning("This won't do anything");
               throw("Die silently without a message");

               #turn on all messages
               verbose('ALL');
               info("All messages are now displayed");

               if(verbose() > 3000) {
                 print "Verbosity is pretty high";
               }

  Description: Gets/Sets verbosity level which defines which messages are
               to be displayed.  An integer value may be passed or one of the
               following strings:
               'OFF'       (= 0)
               'EXCEPTION' (= 1000)
               'WARNING'   (= 2000)
               'DEPRECATE' (= 3000)
               'INFO'      (= 4000)
               'ALL'       (= 1000000)

  Returntype : int 
  Exceptions : none
  Caller     : general</pre></td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_warning" id="_pod_warning"></a><a name="POD8" id="POD8"></a>warning</td><td ><a href="#CODE9">code</a></td><td ><a href="#POD7">prev</a></td><td ><a href="#POD9">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td><pre id="podParagraph">  Arg [1]    : string warning(message);
  Arg [2]    : (optional) int level
               Override the default level of this warning changning the level
               of verbosity at which it is displayed.
  Example    : use <B>APPRIS::Utils::Exception</B> qw(warning)
               warning('This is a warning');
  Description: If the verbosity level is higher or equal to the level of this 
               warning then a warning message is printed to STDERR.  If the 
               verbosity lower then nothing is done.  Under the default
               levels of warning and verbosity warnings will be displayed.
  Returntype : none
  Exceptions : warning every time
  Caller     : general</pre></td></tr></table>
<div id="sep"></div>
<a name="MethCode" id="MethCode"></a>
<div id="mainTitle">Methods code</div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE1" id="CODE1"></a>catch</td><td >description</td><td >prev</td><td ><a href="#CODE2">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">catch</span>
{<pre><span id="braces">(</span>&amp;<span id="braces">)</span> <span id="braces">{</span>  <span id="perlFunc">shift</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE2" id="CODE2"></a>deprecate</td><td ><a href="#POD1">description</a></td><td ><a href="#CODE1">prev</a></td><td ><a href="#CODE3">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">deprecate</span>
{<pre>  <span id="perlKey">my</span> <span id="var">$mesg</span> = <span id="perlFunc">shift</span>;
  <span id="var">$mesg</span> = <span id="perlFunc">shift</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$mesg</span> <span id="perlKey">eq</span> <span id="dqStr">"APPRIS::Utils::Exception"</span><span id="braces">)</span>; <span id="comment">#skip object if one provided</span><br />
  <span id="perlKey">my</span> <span id="var">$level</span> = <span id="perlFunc">shift</span>;

  <span id="var">$level</span> = <span id="var">$DEFAULT_DEPRECATE</span> <span id="perlKey">if</span><span id="braces">(</span>!<span id="perlFunc">defined</span><span id="braces">(</span><span id="var">$level</span><span id="braces">)</span><span id="braces">)</span>;

  <span id="perlKey">return</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$VERBOSITY</span> &lt; <span id="var">$level</span><span id="braces">)</span>;
                                 
  <span id="perlKey">my</span> <span id="var">@caller</span> = <span id="perlFunc">caller</span><span id="braces">(</span>1<span id="braces">)</span>;
  <span id="perlKey">my</span> <span id="var">$subname</span> = <span id="var">$caller</span><span id="braces">[</span>3<span id="braces">]</span> ;
  <span id="perlKey">my</span> <span id="var">$line</span> = <span id="var">$caller</span><span id="braces">[</span>2<span id="braces">]</span>;

  <span id="comment">#use only 2 subdirs for brevity when reporting the filename</span><br />  <span id="perlKey">my</span> <span id="var">$file</span>;
  <span id="perlKey">my</span> <span id="var">@path</span> = <span id="var">$caller</span><span id="braces">[</span>1<span id="braces">]</span>;
  <span id="var">$file</span> = <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@path</span><span id="braces">)</span>;
  <span id="perlKey">my</span> <span id="var">$i</span> = 0;
  <span id="perlKey">while</span><span id="braces">(</span><span id="var">@path</span> &amp;&amp; <span id="var">$i</span> &lt; 2<span id="braces">)</span> <span id="braces">{</span>
    <span id="var">$i</span>++;
    <span id="var">$file</span> .= <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@path</span><span id="braces">)</span>;
  <span id="braces">}</span>

  <span id="comment">#keep track of who called this method so that the warning is only displayed</span><br />  <span id="comment">#once per deprecated call</span><br />  <span id="perlKey">return</span> <span id="perlKey">if</span> <span id="var">$DEPRECATED</span><span id="braces">{</span><span id="dqStr">"<span id="var">$line</span>:<span id="var">$file</span>:<span id="var">$subname</span>"</span><span id="braces">}</span>;

  <span id="perlKey">if</span><span id="braces">(</span><span id="var">$VERBOSITY</span> &gt; -1<span id="braces">)</span> <span id="braces">{</span>
    <span id="perlFunc">print</span> STDERR <span id="dqStr">"\n------------------ DEPRECATED ---------------------\n"</span> .
                   <span id="dqStr">"Deprecated method call in file <span id="var">$file</span> line <span id="var">$line</span>.\n"</span> .
                   <span id="dqStr">"Method <span id="var">$subname</span> is deprecated.\n"</span> .
                   <span id="dqStr">"$mesg\n"</span> .
                   <span id="dqStr">"---------------------------------------------------\n"</span>;
  <span id="braces">}</span>

  <span id="var">$DEPRECATED</span><span id="braces">{</span><span id="dqStr">"<span id="var">$line</span>:<span id="var">$file</span>:<span id="var">$subname</span>"</span><span id="braces">}</span> = 1;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE3" id="CODE3"></a>info</td><td ><a href="#POD2">description</a></td><td ><a href="#CODE2">prev</a></td><td ><a href="#CODE4">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">info</span>
{<pre>  <span id="perlKey">my</span> <span id="var">$string</span> = <span id="perlFunc">shift</span>;
  <span id="var">$string</span> = <span id="perlFunc">shift</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$string</span> <span id="perlKey">eq</span> <span id="dqStr">"APPRIS::Utils::Exception"</span><span id="braces">)</span>;
  <span id="perlKey">my</span> <span id="var">$level</span>  = <span id="perlFunc">shift</span>;

  <span id="var">$level</span> = <span id="var">$DEFAULT_INFO</span> <span id="perlKey">if</span><span id="braces">(</span>!<span id="perlFunc">defined</span><span id="braces">(</span><span id="var">$level</span><span id="braces">)</span><span id="braces">)</span>;

  <span id="perlKey">return</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$VERBOSITY</span> &lt; <span id="var">$level</span><span id="braces">)</span>;

  <span id="perlFunc">print</span> STDERR <span id="dqStr">"INFO: $string\n"</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE4" id="CODE4"></a>stack_trace</td><td ><a href="#POD3">description</a></td><td ><a href="#CODE3">prev</a></td><td ><a href="#CODE5">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">stack_trace</span>
{<pre>  <span id="perlKey">my</span> <span id="var">$i</span> = 0;
  <span id="perlKey">my</span> <span id="var">@out</span>;
  <span id="perlKey">my</span> <span id="var">$prev</span>;
  <span id="perlKey">while</span> <span id="braces">(</span> <span id="perlKey">my</span> <span id="var">@call</span> = <span id="perlFunc">caller</span><span id="braces">(</span><span id="var">$i</span>++<span id="braces">)</span><span id="braces">)</span> <span id="braces">{</span>

    <span id="comment"># major annoyance that caller puts caller context as</span><br />    <span id="comment"># function name. Hence some monkeying around...</span><br />    <span id="var">$prev</span>-&gt;<span id="braces">[</span>3<span id="braces">]</span> = <span id="var">$call</span><span id="braces">[</span>3<span id="braces">]</span>;
    <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@out</span>,<span id="var">$prev</span><span id="braces">)</span>;
    <span id="var">$prev</span> =\@ call;
  <span id="braces">}</span>
  <span id="var">$prev</span>-&gt;<span id="braces">[</span>3<span id="braces">]</span> = <span id="sqStr">'toplevel'</span>;
  <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@out</span>,<span id="var">$prev</span><span id="braces">)</span>;
  <span id="perlKey">return</span> <span id="var">@out</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE5" id="CODE5"></a>stack_trace_dump</td><td ><a href="#POD4">description</a></td><td ><a href="#CODE4">prev</a></td><td ><a href="#CODE6">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">stack_trace_dump</span>
{<pre>  <span id="perlKey">my</span> <span id="var">@stack</span> = <span id="method">stack_trace</span><span id="braces">(</span><span id="braces">)</span>;

  <span id="perlKey">my</span> <span id="var">$levels</span> = 2; <span id="comment">#default is 2 levels so stack_trace_dump call is not present</span><br />  <span id="var">$levels</span> = <span id="perlFunc">shift</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">@_</span><span id="braces">)</span>;
  <span id="var">$levels</span> = <span id="perlFunc">shift</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$levels</span> <span id="perlKey">eq</span> <span id="dqStr">"APPRIS::Utils::Exception"</span><span id="braces">)</span>;
  <span id="var">$levels</span> = 1 <span id="perlKey">if</span><span id="braces">(</span><span id="var">$levels</span> &lt; 1<span id="braces">)</span>;
  
  <span id="perlKey">while</span><span id="braces">(</span><span id="var">$levels</span><span id="braces">)</span> <span id="braces">{</span>
    <span id="var">$levels</span>--;
    <span id="perlFunc">shift</span> <span id="var">@stack</span>;
  <span id="braces">}</span>

  <span id="perlKey">my</span> <span id="var">$out</span>;
  <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$module</span>,<span id="var">$function</span>,<span id="var">$file</span>,<span id="var">$position</span><span id="braces">)</span>;


  <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$stack</span> <span id="braces">(</span> <span id="var">@stack</span><span id="braces">)</span> <span id="braces">{</span>
    <span id="braces">(</span><span id="var">$module</span>,<span id="var">$file</span>,<span id="var">$position</span>,<span id="var">$function</span><span id="braces">)</span> = @<span id="braces">{</span><span id="var">$stack</span><span id="braces">}</span>;
    <span id="var">$out</span> .= <span id="dqStr">"STACK <span id="var">$function</span> <span id="var">$file</span>:$position\n"</span>;
  <span id="braces">}</span>

  <span id="perlKey">return</span> <span id="var">$out</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE6" id="CODE6"></a>throw</td><td ><a href="#POD5">description</a></td><td ><a href="#CODE5">prev</a></td><td ><a href="#CODE7">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">throw</span>
{<pre>  <span id="perlKey">my</span> <span id="var">$string</span> = <span id="perlFunc">shift</span>;

  <span id="var">$string</span> = <span id="perlFunc">shift</span> <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">ref</span><span id="braces">(</span><span id="var">$string</span><span id="braces">)</span><span id="braces">)</span>; <span id="comment">#skip object if one provided</span><br />  <span id="var">$string</span> = <span id="perlFunc">shift</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$string</span> <span id="perlKey">eq</span> <span id="dqStr">"APPRIS::Utils::Exception"</span><span id="braces">)</span>;

  <span id="perlKey">my</span> <span id="var">$level</span>  = <span id="perlFunc">shift</span>;

  <span id="var">$level</span> = <span id="var">$DEFAULT_EXCEPTION</span> <span id="perlKey">if</span><span id="braces">(</span>!<span id="perlFunc">defined</span><span id="braces">(</span><span id="var">$level</span><span id="braces">)</span><span id="braces">)</span>;

  <span id="perlKey">if</span><span id="braces">(</span><span id="var">$VERBOSITY</span> &lt; <span id="var">$level</span><span id="braces">)</span> <span id="braces">{</span>
    <span id="perlFunc">die</span><span id="braces">(</span><span id="dqStr">"\n"</span><span id="braces">)</span>; <span id="comment">#still die, but silently</span><br />  <span id="braces">}</span>

  <span id="perlKey">my</span> <span id="var">$std</span> = <span id="method">stack_trace_dump</span><span id="braces">(</span>3<span id="braces">)</span>;

  <span id="perlKey">my</span> <span id="var">$out</span> = <span id="dqStr">"\n-------------------- EXCEPTION --------------------\n"</span> .
              <span id="dqStr">"MSG: $string\n"</span> .
              <span id="dqStr">"<span id="var">$std</span>"</span> .
              <span id="dqStr">"---------------------------------------------------\n"</span>;
  <span id="perlFunc">die</span> <span id="var">$out</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE7" id="CODE7"></a>try</td><td ><a href="#POD6">description</a></td><td ><a href="#CODE6">prev</a></td><td ><a href="#CODE8">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">try</span>
{<pre><span id="braces">(</span>&amp;$<span id="braces">)</span> <span id="braces">{</span>  <span id="perlKey">my</span> <span id="braces">(</span><span id="var">$try</span>, <span id="var">$catch</span><span id="braces">)</span> = <span id="var">@_</span>;
  <span id="perlKey">eval</span> <span id="braces">{</span> &amp;<span id="var">$try</span> <span id="braces">}</span>;
  <span id="perlKey">if</span> <span id="braces">(</span>$@<span id="braces">)</span> <span id="braces">{</span>
    <span id="perlFunc">chop</span> $@;
    <span id="perlKey">local</span> <span id="var">$_</span> = $@;
    &amp;<span id="var">$catch</span>;
  <span id="braces">}</span></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE8" id="CODE8"></a>verbose</td><td ><a href="#POD7">description</a></td><td ><a href="#CODE7">prev</a></td><td ><a href="#CODE9">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">verbose</span>
{<pre>  <span id="perlKey">if</span><span id="braces">(</span><span id="var">@_</span><span id="braces">)</span> <span id="braces">{</span>
    <span id="perlKey">my</span> <span id="var">$verbosity</span> = <span id="perlFunc">shift</span>;
    <span id="var">$verbosity</span> = <span id="perlFunc">shift</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="dqStr">"APPRIS::Utils::Exception"</span><span id="braces">)</span>;
    <span id="perlKey">if</span><span id="braces">(</span><span id="var">$verbosity</span> =~ <span id="regExp">/\d+/</span><span id="braces">)</span> <span id="braces">{</span> <span id="comment">#check if verbosity is an integer</span><br />      <span id="var">$VERBOSITY</span> = <span id="var">$verbosity</span>;
    <span id="braces">}</span> <span id="perlKey">else</span> <span id="braces">{</span>
      <span id="var">$verbosity</span> = <span id="perlFunc">uc</span><span id="braces">(</span><span id="var">$verbosity</span><span id="braces">)</span>;
      <span id="perlKey">if</span><span id="braces">(</span><span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'OFF'</span> || <span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'NOTHING'</span> || 
         <span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'NONE'</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="var">$VERBOSITY</span> = 0;
      <span id="braces">}</span> <span id="perlKey">elsif</span><span id="braces">(</span><span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'EXCEPTION'</span> || <span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'THROW'</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="var">$VERBOSITY</span> = <span id="var">$DEFAULT_EXCEPTION</span>;
      <span id="braces">}</span> <span id="perlKey">elsif</span><span id="braces">(</span><span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'WARNING'</span> || <span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'WARN'</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="var">$VERBOSITY</span> = <span id="var">$DEFAULT_WARNING</span>;
      <span id="braces">}</span> <span id="perlKey">elsif</span><span id="braces">(</span><span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'DEPRECATE'</span> || <span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'DEPRECATED'</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="var">$VERBOSITY</span> = <span id="var">$DEFAULT_DEPRECATE</span>;
      <span id="braces">}</span> <span id="perlKey">elsif</span><span id="braces">(</span><span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'INFO'</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="var">$VERBOSITY</span> = <span id="var">$DEFAULT_INFO</span>;
      <span id="braces">}</span> <span id="perlKey">elsif</span><span id="braces">(</span><span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'ON'</span> || <span id="var">$verbosity</span> <span id="perlKey">eq</span> <span id="sqStr">'ALL'</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="var">$VERBOSITY</span> = 1e6;
      <span id="braces">}</span> <span id="perlKey">else</span> <span id="braces">{</span>
        <span id="var">$VERBOSITY</span> = <span id="var">$DEFAULT_WARNING</span>;
        <span id="method">warning</span><span id="braces">(</span><span id="dqStr">"Unknown level of verbosity: <span id="var">$verbosity</span>"</span><span id="braces">)</span>;
      <span id="braces">}</span>
    <span id="braces">}</span>
  <span id="braces">}</span>

  <span id="perlKey">return</span> <span id="var">$VERBOSITY</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE9" id="CODE9"></a>warning</td><td ><a href="#POD8">description</a></td><td ><a href="#CODE8">prev</a></td><td >next</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">warning</span>
{<pre>  <span id="perlKey">my</span> <span id="var">$string</span> = <span id="perlFunc">shift</span>;
  <span id="var">$string</span> = <span id="perlFunc">shift</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$string</span> <span id="perlKey">eq</span> <span id="dqStr">"APPRIS::Utils::Exception"</span><span id="braces">)</span>; <span id="comment">#skip object if one provided</span><br />  <span id="perlKey">my</span> <span id="var">$level</span>  = <span id="perlFunc">shift</span>;

   <span id="var">$level</span> = <span id="var">$DEFAULT_WARNING</span> <span id="perlKey">if</span><span id="braces">(</span>!<span id="perlFunc">defined</span><span id="braces">(</span><span id="var">$level</span><span id="braces">)</span><span id="braces">)</span>;

  <span id="perlKey">return</span> <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$VERBOSITY</span> &lt; <span id="var">$level</span><span id="braces">)</span>;

  <span id="perlKey">my</span> <span id="var">@caller</span> = <span id="perlFunc">caller</span>;
  <span id="perlKey">my</span> <span id="var">$line</span> = <span id="var">$caller</span><span id="braces">[</span>2<span id="braces">]</span> || <span id="sqStr">''</span>;

  <span id="comment">#use only 2 subdirs for brevity when reporting the filename</span><br />  <span id="perlKey">my</span> <span id="var">$file</span>;
  <span id="perlKey">my</span> <span id="var">@path</span> = <span id="perlFunc">split</span><span id="braces">(</span><span id="regExp">/\//</span>, <span id="var">$caller</span><span id="braces">[</span>1<span id="braces">]</span><span id="braces">)</span>;
  <span id="var">$file</span> = <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@path</span><span id="braces">)</span>;
  <span id="perlKey">my</span> <span id="var">$i</span> = 0;
  <span id="perlKey">while</span><span id="braces">(</span><span id="var">@path</span> &amp;&amp; <span id="var">$i</span> &lt; 2<span id="braces">)</span> <span id="braces">{</span>
    <span id="var">$i</span>++;
    <span id="var">$file</span> = <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@path</span><span id="braces">)</span> .<span id="dqStr">"/<span id="var">$file</span>"</span>;
  <span id="braces">}</span>

  <span id="var">@caller</span> = <span id="perlFunc">caller</span><span id="braces">(</span>1<span id="braces">)</span>;
  <span id="perlKey">my</span> <span id="var">$caller_line</span>;
  <span id="perlKey">my</span> <span id="var">$caller_file</span>;
  <span id="var">$i</span>=0;
  <span id="perlKey">if</span><span id="braces">(</span><span id="var">@caller</span><span id="braces">)</span> <span id="braces">{</span>
     <span id="var">@path</span> = <span id="perlFunc">split</span><span id="braces">(</span><span id="regExp">/\//</span>, <span id="var">$caller</span><span id="braces">[</span>1<span id="braces">]</span><span id="braces">)</span>;
     <span id="var">$caller_line</span> = <span id="var">$caller</span><span id="braces">[</span>2<span id="braces">]</span>;
     <span id="var">$caller_file</span> = <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@path</span><span id="braces">)</span>;
     <span id="perlKey">while</span><span id="braces">(</span><span id="var">@path</span> &amp;&amp; <span id="var">$i</span> &lt; 2<span id="braces">)</span> <span id="braces">{</span>
       <span id="var">$i</span>++;
       <span id="var">$caller_file</span> = <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@path</span><span id="braces">)</span> .<span id="dqStr">"/<span id="var">$caller_file</span>"</span>;
     <span id="braces">}</span>
  <span id="braces">}</span>

  
  <span id="perlKey">my</span> <span id="var">$out</span> = <span id="dqStr">"\n-------------------- WARNING ----------------------\n"</span>.
              <span id="dqStr">"MSG: $string\n"</span>.
              <span id="dqStr">"FILE: <span id="var">$file</span> LINE: $line\n"</span>;
  <span id="var">$out</span> .=     <span id="dqStr">"CALLED BY: <span id="var">$caller_file</span>  LINE: $caller_line\n"</span> <span id="perlKey">if</span><span id="braces">(</span><span id="var">$caller_file</span><span id="braces">)</span>;
  <span id="var">$out</span> .=     <span id="dqStr">"---------------------------------------------------\n"</span>;
  <span id="perlFunc">print</span> STDERR <span id="var">$out</span>;</pre>}</td></div>
<div id="sep"></div>
<a name="General" id="General"></a>
<div id="mainTitle">General documentation</div>
<div id="sep"></div>
<table id="genInfoTitle" width="100%"><tr><td><a name="_pod_CONTACT" id="_pod_CONTACT"></a>CONTACT</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="genInfoArea"><pre id="podParagraph">  Please email comments or questions to the public INB
  developers list at <<a href="mailto:inb-tecnico@lists.cnio.es" id="podEmail">inb-tecnico@lists.cnio.es</a>&gt;.<br />
  Questions may also be sent to the developer, 
  Jose Manuel Rodriguez <<a href="mailto:jmrodriguez@cnio.es" id="podEmail">jmrodriguez@cnio.es</a>&gt;.</pre></div>
<div id="sep"></div>
</body>
</html>
